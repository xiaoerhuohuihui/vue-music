{"version":3,"sources":["webpack:///src/components/search/Search.vue","webpack:///./src/components/search/Search.vue?207d","webpack:///./src/components/search/Search.vue"],"names":["Entities","__webpack_require__","XmlEntities","data","value","result","p","songlist","isShowMore","allSongNo","components","SongList","computed","extends_default","Object","vuex_esm","getMyMusicList","getSongList","_this","this","myList","map","item","filter","my","song","songmid","push","islike","mounted","window","addEventListener","scroll","methods","search","_this2","$myInd","open","api","then","res","list","totalnum","close","catch","err","console","log","getMoreMusic","_this3","length","concat","scrollTop","pageYOffset","document","documentElement","body","search_Search","render","_vm","_h","$createElement","_c","_self","ref","staticClass","directives","name","rawName","expression","attrs","type","placeholder","domProps","on","keyup","$event","_k","keyCode","key","input","target","composing","_v","showMore","staticRenderFns","Component","normalizeComponent","Search","ssrContext","__webpack_exports__"],"mappings":"qKAYA,IAAAA,EADAC,EAAA,QAAAC,cAGAC,KADA,WAEA,OACAC,MAAA,GACAC,UACAC,EAAA,EACAC,YACAC,YAAA,EACAC,UAAA,IAGAC,YACAC,WAAA,GAEAC,SAAAC,OACAC,OAAAC,EAAA,EAAAD,EACAE,eAAA,oBAEAC,YAJA,WAIA,IAAAC,EAAAC,KACAC,KAkBA,OAjBAD,KAAAd,OACAgB,IAAA,SAAAC,GACAJ,EAAAF,eAAAO,OAAA,SAAAC,GACA,OAAAA,EAAAC,KAAAC,SAAAJ,EAAAI,UACA,GAEAN,EAAAO,MACAF,KAAAH,EACAM,QAAA,IAGAR,EAAAO,MACAF,KAAAH,EACAM,QAAA,MAIAR,KAGAS,QAxCA,WAyCAC,OAAAC,iBAAA,SAAAZ,KAAAa,SAEAC,SACAC,OADA,WACA,IAAAC,EAAAhB,KACAA,KAAAX,YAAA,EACAW,KAAAiB,OAAAC,OACAvB,OAAAwB,EAAA,EAAAxB,CAAAK,KAAAf,MAAAe,KAAAb,GACAiC,KAAA,SAAAC,GACAL,EAAA9B,OAAAmC,EAAArC,UAAAsB,KAAAgB,KACAN,EAAA1B,UAAA+B,EAAArC,UAAAsB,KAAAiB,SACAP,EAAAC,OAAAO,UAEAC,MAAA,SAAAC,GACAC,QAAAC,IAAAF,MAGAG,aAdA,WAcA,IAAAC,EAAA9B,KAEA,GADAA,KAAAiB,OAAAC,OACAlB,KAAAd,OAAA6C,QAAA/B,KAAAV,UAWA,OAVAU,KAAAb,GAAA,OACAQ,OAAAwB,EAAA,EAAAxB,CAAAK,KAAAf,MAAAe,KAAAb,GACAiC,KAAA,SAAAC,GACAS,EAAA5C,OAAA4C,EAAA5C,OAAA8C,OAAAX,EAAArC,UAAAsB,KAAAgB,MACAQ,EAAAxC,UAAA+B,EAAArC,UAAAsB,KAAAiB,SACAO,EAAAb,OAAAO,UAEAC,MAAA,SAAAC,GACAC,QAAAC,IAAAF,KAIA1B,KAAAX,YAAA,GAGAwB,OAhCA,WAiCA,IAAAoB,EACAtB,OAAAuB,aACAC,SAAAC,gBAAAH,WACAE,SAAAE,KAAAJ,UACAN,QAAAC,IAAAK,OC1FAK,GADiBC,OAFjB,WAA0B,IAAAC,EAAAxC,KAAayC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,IAAA,SAAAC,YAAA,WAAkCH,EAAA,SAAcI,aAAaC,KAAA,QAAAC,QAAA,UAAAhE,MAAAuD,EAAA,MAAAU,WAAA,UAAoEJ,YAAA,eAAAK,OAAoCC,KAAA,SAAAC,YAAA,WAAwCC,UAAWrE,MAAAuD,EAAA,OAAoBe,IAAKC,MAAA,SAAAC,GAAyB,iBAAAA,IAAAjB,EAAAkB,GAAAD,EAAAE,QAAA,WAAAF,EAAAG,IAAA,SAA+FpB,EAAAzB,OAAA0C,GAAf,MAAyCI,MAAA,SAAAJ,GAA0BA,EAAAK,OAAAC,YAAsCvB,EAAAvD,MAAAwE,EAAAK,OAAA7E,WAAgCuD,EAAAwB,GAAA,KAAArB,EAAA,aAA8BQ,OAAO/D,SAAAoD,EAAA1C,YAAAmE,SAAAzB,EAAAnD,YAAqDkE,IAAK1B,aAAAW,EAAAX,iBAAiC,IAE5rBqC,oBCCjB,IAcAC,EAdArF,EAAA,OAcAsF,CACAC,EACA/B,GATA,EAVA,SAAAgC,GACAxF,EAAA,SAaA,kBAEA,MAUAyF,EAAA,QAAAJ,EAAA","file":"static/js/6.a76c573d94b0666ace9d.js","sourcesContent":["<template>\r\n    <div class=\"search\" ref=\"search\">\r\n    <input type=\"search\" class=\"search-input\" v-model=\"value\" placeholder=\"搜索歌曲、歌手\" @keyup.enter=\"search\">\r\n    <song-list :songlist='getSongList' @getMoreMusic='getMoreMusic' :showMore='isShowMore'></song-list>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport { searchMusic } from \"@/api/api\";\r\nimport SongList from \"com/tools/SongList\";\r\nimport { mapGetters } from \"vuex\";\r\nconst Entities = require('html-entities').XmlEntities;\r\nconst entities = new Entities();\r\nexport default {\r\n  data() {\r\n    return {\r\n      value: \"\",\r\n      result: [],\r\n      p: 1,\r\n      songlist: [],\r\n      isShowMore: true,\r\n      allSongNo:0\r\n    };\r\n  },\r\n  components: {\r\n    SongList\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getMyMusicList:'getMyMusicList'\r\n    }),\r\n    getSongList(){\r\n      let myList = []\r\n      let nowList = this.result\r\n      nowList.map(item=>{\r\n       let f = this.getMyMusicList.filter(my=>{\r\n          return my.song.songmid == item.songmid\r\n        })[0]\r\n        if (f) {\r\n          myList.push({\r\n              song:item,\r\n              islike:true\r\n            })\r\n        }else{\r\n          myList.push({\r\n              song:item,\r\n              islike:false\r\n            })\r\n        }\r\n      })\r\n      return myList\r\n    },\r\n  },\r\n  mounted() {\r\n    window.addEventListener(\"scroll\", this.scroll);\r\n  },\r\n  methods: {\r\n    search() {\r\n      this.isShowMore = true\r\n      this.$myInd.open()\r\n      searchMusic(this.value, this.p)\r\n        .then(res => {\r\n          this.result = res.data.data.song.list;\r\n          this.allSongNo = res.data.data.song.totalnum\r\n          this.$myInd.close()\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getMoreMusic() {\r\n      this.$myInd.open()\r\n      if (this.result.length <= this.allSongNo) {\r\n        this.p += 1;\r\n        searchMusic(this.value, this.p)\r\n          .then(res => {\r\n            this.result = this.result.concat(res.data.data.song.list)\r\n            this.allSongNo = res.data.data.song.totalnum\r\n            this.$myInd.close()\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n          });\r\n        return;\r\n      }\r\n      this.isShowMore = false;\r\n    },\r\n    \r\n    scroll() {\r\n      var scrollTop =\r\n        window.pageYOffset ||\r\n        document.documentElement.scrollTop ||\r\n        document.body.scrollTop;\r\n      console.log(scrollTop);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.search {\r\n  width: 100%;\r\n}\r\n.search-input {\r\n  height: 30px;\r\n  width: 100%;\r\n  padding: 5px;\r\n  border: 1px solid rgb(0, 0, 0);\r\n  /* margin: 5px; */\r\n  outline: none;\r\n}\r\n.search-list {\r\n  margin-bottom: 50px;\r\n}\r\n.mint-search-list {\r\n  padding: 0;\r\n  margin-top: 44px;\r\n}\r\n.song {\r\n  height: 10vh;\r\n  border: 1px solid aqua;\r\n  padding: 10px 20px;\r\n  font-size: 18px;\r\n  display: flex;\r\n  overflow: hidden;\r\n}\r\n.info-div {\r\n  padding-left: 20px;\r\n}\r\n.info-div p {\r\n  font-size: 20px;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n}\r\n.info-div span {\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  font-size: 16px;\r\n  color: rgb(129, 128, 121);\r\n}\r\n\r\n.next {\r\n  text-align: center;\r\n  line-height: 1.5;\r\n  margin-top: -50px;\r\n}\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/search/Search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"search\",staticClass:\"search\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value),expression:\"value\"}],staticClass:\"search-input\",attrs:{\"type\":\"search\",\"placeholder\":\"搜索歌曲、歌手\"},domProps:{\"value\":(_vm.value)},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.value=$event.target.value}}}),_vm._v(\" \"),_c('song-list',{attrs:{\"songlist\":_vm.getSongList,\"showMore\":_vm.isShowMore},on:{\"getMoreMusic\":_vm.getMoreMusic}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-28dcdfe2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/search/Search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-28dcdfe2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-28dcdfe2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-28dcdfe2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/search/Search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}